<!DOCTYPE html>
<!-- saved from url=(0059)http://wiki.metalforge.net/doku.php/server:server_compiling -->
<html lang="en" dir="ltr" class="js desktop"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <title>server:server_compiling [Crossfire Wiki]</title>
    <script async="" src="./server_server_compiling [Crossfire Wiki]_files/analytics.js.download"></script><script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki">
<meta name="robots" content="index,follow">
<meta name="keywords" content="server,server_compiling">
<link rel="search" type="application/opensearchdescription+xml" href="http://wiki.metalforge.net/lib/exe/opensearch.php" title="Crossfire Wiki">
<link rel="start" href="http://wiki.metalforge.net/">
<link rel="contents" href="http://wiki.metalforge.net/doku.php/server:server_compiling?do=index" title="Sitemap">
<link rel="alternate" type="application/rss+xml" title="Recent changes" href="http://wiki.metalforge.net/feed.php">
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="http://wiki.metalforge.net/feed.php?mode=list&amp;ns=server">
<link rel="alternate" type="text/html" title="Plain HTML" href="http://wiki.metalforge.net/doku.php/server:server_compiling?do=export_xhtml">
<link rel="alternate" type="text/plain" title="Wiki Markup" href="http://wiki.metalforge.net/doku.php/server:server_compiling?do=export_raw">
<link rel="canonical" href="http://wiki.metalforge.net/doku.php/server:server_compiling">
<link rel="stylesheet" type="text/css" href="./server_server_compiling [Crossfire Wiki]_files/css.php">
<script type="text/javascript">/*<![CDATA[*/var NS='server';var JSINFO = {"id":"server:server_compiling","namespace":"server","isadmin":0,"isauth":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="./server_server_compiling [Crossfire Wiki]_files/js.php"></script>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="shortcut icon" href="http://wiki.metalforge.net/lib/tpl/dokuwiki/images/favicon.ico">
<link rel="apple-touch-icon" href="http://wiki.metalforge.net/lib/tpl/dokuwiki/images/apple-touch-icon.png">
    </head>

<body>
    <!--[if lte IE 7 ]><div id="IE7"><![endif]--><!--[if IE 8 ]><div id="IE8"><![endif]-->
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_dokuwiki     ">

        
<!-- ********** HEADER ********** -->
<div id="dokuwiki__header"><div class="pad group">

    
    <div class="headings group">
        <ul class="a11y skip">
            <li><a href="http://wiki.metalforge.net/doku.php/server:server_compiling#dokuwiki__content">skip to content</a></li>
        </ul>

        <h1><a href="http://wiki.metalforge.net/doku.php/start" accesskey="h" title="[H]"><img src="./server_server_compiling [Crossfire Wiki]_files/logo.png" width="64" height="64" alt=""> <span>Crossfire Wiki</span></a></h1>
            </div>

    <div class="tools group">
        <!-- USER TOOLS -->
                    <div id="dokuwiki__usertools">
                <h3 class="a11y">User Tools</h3>
                <ul>
                    <li><a href="http://wiki.metalforge.net/doku.php/server:server_compiling?do=register" class="action register" rel="nofollow" title="Register">Register</a></li><li><a href="http://wiki.metalforge.net/doku.php/server:server_compiling?do=login&amp;sectok=58b74d01ae196691b4bb9c4ae56d5dd8" class="action login" rel="nofollow" title="Login">Login</a></li>                </ul>
            </div>
        
        <!-- SITE TOOLS -->
        <div id="dokuwiki__sitetools">
            <h3 class="a11y">Site Tools</h3>
            <form action="http://wiki.metalforge.net/doku.php/start" accept-charset="utf-8" class="search" id="dw__search" method="get" role="search"><div class="no"><input type="hidden" name="do" value="search"><input type="text" id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]"><input type="submit" value="Search" class="button" title="Search"><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>            <div class="mobileTools">
                <form action="http://wiki.metalforge.net/doku.php" method="get" accept-charset="utf-8"><div class="no"><input type="hidden" name="id" value="server:server_compiling"><select name="do" class="edit quickselect" title="Tools"><option value="">Tools</option><optgroup label="Page Tools"><option value="edit">Show pagesource</option><option value="revisions">Old revisions</option><option value="backlink">Backlinks</option></optgroup><optgroup label="Site Tools"><option value="recent">Recent changes</option><option value="media">Media Manager</option><option value="index">Sitemap</option></optgroup><optgroup label="User Tools"><option value="login">Login</option><option value="register">Register</option></optgroup></select><input type="submit" value="&gt;" style="display: none;"></div></form>            </div>
            <ul>
                <li><a href="http://wiki.metalforge.net/doku.php/server:server_compiling?do=recent" class="action recent" accesskey="r" rel="nofollow" title="Recent changes [R]">Recent changes</a></li><li><a href="http://wiki.metalforge.net/doku.php/server:server_compiling?do=media&amp;ns=server" class="action media" rel="nofollow" title="Media Manager">Media Manager</a></li><li><a href="http://wiki.metalforge.net/doku.php/server:server_compiling?do=index" class="action index" accesskey="x" rel="nofollow" title="Sitemap [X]">Sitemap</a></li>            </ul>
        </div>

    </div>

    <!-- BREADCRUMBS -->
            <div class="breadcrumbs">
                                        <div class="trace"><span class="bchead">Trace:</span> <span class="bcsep">•</span> <span class="curid"><bdi><a href="http://wiki.metalforge.net/doku.php/server:server_compiling" class="breadcrumbs" title="server:server_compiling">server_compiling</a></bdi></span></div>
                    </div>
    
    
    <hr class="a11y">
</div></div><!-- /header -->

        <div class="wrapper group">

            
            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">

                <div class="pageId"><span>server:server_compiling</span></div>

                <div class="page group">
                                                            <!-- wikipage start -->
                    <!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle open" style="cursor: pointer;"><strong><span>−</span></strong>Table of Contents</h3>
<div style="">

<ul class="toc" aria-expanded="true" style="">
<li class="level1"><div class="li"><a href="http://wiki.metalforge.net/doku.php/server:server_compiling#compiling_the_crossfire_server">Compiling the Crossfire Server</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="http://wiki.metalforge.net/doku.php/server:server_compiling#nix_compile_guide">*Nix Compile Guide</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="http://wiki.metalforge.net/doku.php/server:server_compiling#requirements">Requirements</a></div></li>
<li class="level3"><div class="li"><a href="http://wiki.metalforge.net/doku.php/server:server_compiling#recommended_packages">Recommended Packages</a></div></li>
<li class="level3"><div class="li"><a href="http://wiki.metalforge.net/doku.php/server:server_compiling#useful_packages">Useful Packages</a></div></li>
<li class="level3"><div class="li"><a href="http://wiki.metalforge.net/doku.php/server:server_compiling#start_here">START HERE</a></div></li>
<li class="level3"><div class="li"><a href="http://wiki.metalforge.net/doku.php/server:server_compiling#download">DOWNLOAD</a></div></li>
<li class="level3"><div class="li"><a href="http://wiki.metalforge.net/doku.php/server:server_compiling#setup">SETUP</a></div></li>
<li class="level3"><div class="li"><a href="http://wiki.metalforge.net/doku.php/server:server_compiling#compile">COMPILE</a></div></li>
<li class="level3"><div class="li"><a href="http://wiki.metalforge.net/doku.php/server:server_compiling#launch">LAUNCH</a></div></li>
<li class="level3"><div class="li"><a href="http://wiki.metalforge.net/doku.php/server:server_compiling#update">UPDATE</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="http://wiki.metalforge.net/doku.php/server:server_compiling#microsoft_windows_compile_guide">Microsoft Windows Compile Guide</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="http://wiki.metalforge.net/doku.php/server:server_compiling#subversion">Subversion</a></div></li>
<li class="level3"><div class="li"><a href="http://wiki.metalforge.net/doku.php/server:server_compiling#requirements1">Requirements</a></div></li>
<li class="level3"><div class="li"><a href="http://wiki.metalforge.net/doku.php/server:server_compiling#cross-compiling">Cross-Compiling</a></div></li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="compiling_the_crossfire_server">Compiling the Crossfire Server</h1>
<div class="level1">

<p>
This document describes how to build and install the Crossfire server from source. <br>

Instructions for <a href="http://wiki.metalforge.net/doku.php/client:client_compiling" class="wikilink1" title="client:client_compiling">building the client</a> are on a separate page.
</p>

</div>

<h2 class="sectionedit2" id="nix_compile_guide">*Nix Compile Guide</h2>
<div class="level2">

</div>

<h3 class="sectionedit3" id="requirements">Requirements</h3>
<div class="level3">

<p>
It's likely that many of these packages (listed alphabetically) are already installed on your system, but this list is a way to make sure.  It's important to have all the right packages in place <strong>before</strong> attempting any builds or compiles.
</p>
<ul>
<li class="level1"><div class="li"> automake - A tool for generating GNU Standards-compliant Makefiles</div>
</li>
<li class="level1"><div class="li"> flex - A fast lexical analyzer generator</div>
<ul>
<li class="level2"><div class="li"> m4 - a macro processing language (required by flex)</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> gcc - The GNU C compiler</div>
</li>
<li class="level1"><div class="li"> libgd-tools - GD command line tools and example code</div>
<ul>
<li class="level2"><div class="li"> libgd2-noxpm - GD Graphics Library version 2 (without XPM support) (required by libgd-tools)</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> libgd2-xpm-dev - GD Graphics Library version 2 (development version)</div>
</li>
<li class="level1"><div class="li"> libtool - Generic library support script</div>
</li>
<li class="level1"><div class="li"> make - The GNU version of the “make” utility</div>
</li>
<li class="level1"><div class="li"> python-dev - header files and a static library for Python (default)</div>
</li>
<li class="level1"><div class="li"> subversion - advanced version control system (aka. svn)</div>
<ul>
<li class="level3"><div class="li"> libapr0 - the Apache Portable Runtime (required by subversion)</div>
</li>
<li class="level3"><div class="li"> libsvn0 - shared libraries used by Subversion (aka. svn) (required by subversion)</div>
</li>
</ul>
</li>
</ul>

<p>
As a quick reference:
</p>
<pre class="code">sudo apt-get install automake flex gcc libgd-tools libgd2-xpm-dev libtool make python-dev subversion</pre>

</div>

<h4 id="python_scripting">Python Scripting</h4>
<div class="level4">

<p>
A special note about installing python. The package listed above, <strong>python-dev</strong>, should install the necessary packages to enable many of the in-game features (ship transportation, guilds, post office, et al.) to work.
</p>

<p>
However, if python related features are not working, then installing python depends on your choice of Linux distro.
</p>
<ul>
<li class="level1"><div class="li"> python 2.4 is old, Crossfire runs with 2.5 and 2.6; I would use 2.6 if possible, has not been tried with 3.1</div>
</li>
<li class="level1"><div class="li"> lib64python2.4-2.4.3 is known to work on Mandriva 2007.0 x86_64</div>
</li>
<li class="level1"><div class="li"> python2.6-dev is known to work with Ubuntu Lucid (10.04.4)</div>
</li>
<li class="level1"><div class="li"> python2.7-dev is known to work in Ubuntu Precise (12.04), Trusty (14.04) and Xenial (16.04)</div>
</li>
</ul>

<p>
As an example, this is what you would use to install python on Ubuntu Trusty Tahr:
</p>
<pre class="code">sudo apt-get install python2.7-dev</pre>

<p>
To confirm python is fully installed
</p>
<pre class="code"> $ python</pre>

<p>
and you should see an output like:
</p>
<pre class="code">   Python 2.7.3 (default, Apr 10 2013, 06:20:15)
   [GCC 4.6.3] on linux2
   Type "help", "copyright", "credits" or "license" for more information.
   &gt;&gt;&gt;</pre>

<p>
If you see something like the above, python is installed, ctrl-d to quit python.
</p>

</div>

<h3 class="sectionedit4" id="recommended_packages">Recommended Packages</h3>
<div class="level3">

<p>
The recommended packages provide additional add-ons or features (summaries included, below) to the server or as a way to test new functions and features.
</p>
<ul>
<li class="level1"><div class="li"> autoconf - automatic configure script builder (Not normally required for end-user builds, but it is useful if build scripts are not up to date)</div>
</li>
<li class="level1"><div class="li"> <a href="http://wiki.metalforge.net/doku.php/dev:check" class="wikilink1" title="dev:check">check</a> - unit test framework for C (used by the unit tests)</div>
</li>
<li class="level1"><div class="li"> libsqlite3-0 - SQLite 3 shared library (used by cflogger)</div>
</li>
<li class="level1"><div class="li"> libpython2.4 - Python shared object library (used by game features such as bank, post office, slot machines, etc.)</div>
</li>
<li class="level1"><div class="li"> libpython2.4-devel - Required to compile python support into the server</div>
</li>
<li class="level1"><div class="li"> libcurl3 - - Multi-protocol file transfer library (required by metaserver2)</div>
</li>
<li class="level1"><div class="li"> libcurl4-openssl-dev - Development files and documentation for libcurl (OpenSSL) (required by metaserver2)</div>
</li>
<li class="level1"><div class="li"> libsvn-dev - Development files for Subversion libraries (required for Subversion revision number reporting in metaserver2)</div>
</li>
</ul>

<p>
As a quick reference:
</p>
<pre class="code">sudo apt-get install check autoconf libsqlite3-0 libcurl3 libcurl4-openssl-dev libsvn-dev</pre>

</div>

<h3 class="sectionedit5" id="useful_packages">Useful Packages</h3>
<div class="level3">

<p>
These useful packages are not normally required for end-user builds, but they come in handy in cases where developers may have forgotten to check in changes to build scripts, etc.
</p>
<ul>
<li class="level1"><div class="li"> cproto - supports `make proto` to automatically update prototype files.</div>
</li>
<li class="level1"><div class="li"> sudo - Provide limited super user privileges to specific users</div>
<ul>
<li class="level2"><div class="li"> Not required, but `sudo make install` is useful for installing to system directories.</div>
</li>
<li class="level2"><div class="li"> sudo is also useful for installing packages that are missing.</div>
</li>
<li class="level2"><div class="li"> Do not run `make` as the root user for security reasons.</div>
</li>
</ul>
</li>
</ul>

</div>

<h3 class="sectionedit6" id="start_here">START HERE</h3>
<div class="level3">

<p>
This is the starting point and confirms you are located in your home directory
</p>
<pre class="code"> $ pwd
 /home/&lt;username&gt;</pre>

<p>
<a href="http://wiki.metalforge.net/doku.php/sourceforge:svn_code#trunk" class="wikilink1" title="sourceforge:svn_code">Trunk</a> Server Build Script : <a href="http://wiki.metalforge.net/doku.php/server:server_compiling_script" class="wikilink1" title="server:server_compiling_script">Trunk Build Script</a>
</p>

</div>

<h3 class="sectionedit7" id="download">DOWNLOAD</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> <a href="http://wiki.metalforge.net/doku.php/sourceforge:svn_code#trunk" class="wikilink1" title="sourceforge:svn_code">Trunk</a> contains the newest features and development for the game</div>
</li>
<li class="level1"><div class="li"> <a href="http://wiki.metalforge.net/doku.php/sourceforge:svn_code#tags" class="wikilink1" title="sourceforge:svn_code">Tags</a> is an official &amp; stable release of the game</div>
</li>
</ul>

<p>
<strong>IMPORTANT</strong> - One should be consistent with what they check out; meaning use all trunk server &amp; archetypes &amp; maps or tags/1.60.0 server &amp; archetypes &amp; maps otherwise you run the risk of incompatibilities (broken maps, missing graphics, etc.)
</p>

<p>
The follow steps will download the necessary files to your computer, which will be used to compile (or build) the server.
</p>

</div>

<h4 id="trunk">Trunk</h4>
<div class="level4">
<pre class="code">$ svn co https://svn.code.sf.net/p/crossfire/code/server/trunk server.svn
$ svn co https://svn.code.sf.net/p/crossfire/code/maps/trunk maps.svn
$ svn co https://svn.code.sf.net/p/crossfire/code/arch/trunk arch.svn</pre>

</div>

<h4 id="tag">Tag</h4>
<div class="level4">

<p>
Here's how you download Tag and is using the 1.71.0 release as an example
</p>
<pre class="code">$ svn co https://svn.code.sf.net/p/crossfire/code/server/tags/1.71.0 server.svn
$ svn co https://svn.code.sf.net/p/crossfire/code/maps/tags/1.71.0 maps.svn
$ svn co https://svn.code.sf.net/p/crossfire/code/arch/tags/1.71.0 arch.svn</pre>

</div>

<h3 class="sectionedit8" id="setup">SETUP</h3>
<div class="level3">

<p>
This confirms that you are still in your home directory
</p>
<pre class="code"> $ pwd
 /home/&lt;username&gt;</pre>

<p>
Now change directory (hence the cd) to the directory that contains the server files
</p>
<pre class="code"> $ cd server.svn</pre>

<p>
This confirms that you are in the server directory
</p>
<pre class="code"> $ pwd
 /home/&lt;username&gt;/server.svn</pre>

<p>
This step “links” two directories to each other which makes the compile process more automated
</p>
<pre class="code"> $ ln -s /home/&lt;username&gt;/maps.svn maps</pre>

<p>
This step “links” two directories to each other which makes the compile process more automated and is used by the server once Crossfire server is up and running. This links the server to the map files which you downloaded earlier.
</p>

<p>
First, create the necessary directory tree for the map files with this command:
</p>
<pre class="code"> $ sudo mkdir -p /usr/games/crossfire/share/crossfire
 $ sudo chown -R &lt;username&gt;.&lt;username&gt; /usr/games/crossfire/</pre>

<p>
What that does, is it creates a directory located here:  /usr/games/crossfire/share/crossfire and changes the ownership of this directory to your user
</p>

<p>
Now this step “links” two directories to each other which makes the compile process more automated
</p>
<pre class="code"> $  ln -s /home/&lt;username&gt;/maps.svn /usr/games/crossfire/share/crossfire/maps</pre>

<p>
Now change directory (hence the cd) to the directory that contains the library files
</p>
<pre class="code"> $ cd lib</pre>

<p>
Double check that you are in the correct directory
</p>
<pre class="code"> $ pwd
 /home/&lt;username&gt;/server.svn/lib</pre>

<p>
This step “links” two directories to each other which makes the compile process more automated. This links the arch or archetype files to the server files which you downloaded earlier.
</p>
<pre class="code"> $ ln -s /home/&lt;username&gt;/arch.svn ./arch</pre>

<p>
Go back another directory
</p>
<pre class="code"> $ cd ..</pre>

<p>
Double check that you are in the correct directory which is the server directory
</p>
<pre class="code"> $ pwd
 /home/&lt;username&gt;/server.svn</pre>

</div>

<h3 class="sectionedit9" id="compile">COMPILE</h3>
<div class="level3">

<p>
SVN commit (~2007-Mar-30) changed the build process for the server; use the following command in the server root directory:
</p>
<pre class="code">$ sh autogen.sh &amp;&amp; make &amp;&amp; sudo make install</pre>

<p>
autogen.sh script re-creates the configure (./configure) script while the rest of the command starts the compile (build) process.  Pass the same options to autogen.sh as you would normally pass to ./configure since autogen.sh calls ./configure.
This command requires both autoconf and automake to be installed.
</p>

<p>
(Otherwise do the following, and look below for optional arguments to autogen.sh)
Now you are going to begin the compile process; choose one of the following:
</p>
<pre class="code">$ ./configure &amp;&amp; make &amp;&amp; make install</pre>

<p>
Any missing dependencies, errors or similar problems during the compile process will be listed.  Each should be addressed or resolved accordingly.
</p>

<p>
<strong>Optional:</strong> If you want to have more useful debugging information in case of crashes, set the CFLAGS environment variable to disable optimization (-O0) and enable debugging (-g): That is a uppercase letter O and a zero
</p>
<pre class="code">$ CFLAGS="-O0 -g" ./configure &amp;&amp; make &amp;&amp; make install</pre>

<p>
<strong>Optional:</strong> For even more gdb debugging information, add -ggdb3 to the command
</p>
<pre class="code">$ CFLAGS="-O0 -ggdb3" ./configure &amp;&amp; make &amp;&amp; make install</pre>

<p>
<strong>Optional:</strong> To disable the unit test or check when compiling the server, use ./configure –disable-check
</p>
<pre class="code">$ ./configure --disable-check &amp;&amp; make &amp;&amp; make install</pre>

<p>
<strong>Optional:</strong> To enforce the unit test or check when compiling the server, use make -k check
</p>
<pre class="code">$ ./configure &amp;&amp; make -k check &amp;&amp; make install</pre>

<p>
<strong>Optional:</strong> If you have modified any archetypes use:
</p>
<pre class="code">$ cd lib &amp;&amp; rm archetypes &amp;&amp; make archetypes &amp;&amp; cd .. &amp;&amp; sh autogen.sh &amp;&amp; make &amp;&amp; sudo make install</pre>

<p>
More information at: <a href="http://wiki.metalforge.net/doku.php/arch:making_archetypes#testing_archetypes" class="wikilink1" title="arch:making_archetypes">Testing Archetypes</a>
</p>

</div>

<h3 class="sectionedit10" id="launch">LAUNCH</h3>
<div class="level3">

<p>
Once the server has been successfully built (aka compiled), you need to launch the Crossfire Server application
</p>

<p>
Double check that you are in the correct directory which is the server directory
</p>
<pre class="code"> $ pwd
 /home/&lt;username&gt;/server.svn</pre>

<p>
Change directory the server directory
</p>
<pre class="code">$ cd server</pre>

<p>
Your file directory path should look like this:
</p>
<pre class="code"> $ pwd
 /home/&lt;username&gt;/server.svn/server</pre>

<p>
Just before launching it is worth while just to make sure all the permissions are correct for the server. If not, the server will not be able to write and characters will not be saved. To do so re-run:
</p>
<pre class="code"> $ sudo chown -R &lt;username&gt;.&lt;username&gt; /usr/games/crossfire/</pre>

<p>
Run this command to launch the server:
</p>
<pre class="code">$ ./crossfire-server &amp;</pre>

<p>
What that command will do is run the Crossfire server and return you back to bash or shell prompt
</p>

<p>
This is the same as running it from your install directory which is typically /usr/games/crossfire/:
</p>
<pre class="code">$ /usr/games/crossfire/bin/crossfire-server &amp;</pre>

</div>

<h4 id="failure_to_launch">failure to launch</h4>
<div class="level4">

<p>
If crossfire-server is unable to locate the maps file it may be because the chown command didn't work. You may see an error like:
</p>
<pre class="code">[EE] Cannot open /usr/games/crossfire/var/crossfire/clockdata for writing
[EE] Couldn't read regions file from "/usr/games/crossfire/share/crossfire/maps/regions.reg".
[EE] Please check that your maps are correctly installed.</pre>

<p>
 A simple fix is to:
</p>
<pre class="code">$ sudo chown -R &lt;username&gt;.&lt;username&gt; /usr/games/crossfire/
$ ln -s /home/crossfire/maps.svn /usr/games/crossfire/share/crossfire/maps</pre>

<p>
Note, great care should be taken in using chown -R as this will change all permissions in the parent directory (e.g. if you “ $ sudo chown -R &lt;username&gt;.&lt;username&gt; /” you will break your linux install's permissions completely)
</p>

</div>

<h4 id="crossloop">Crossloop</h4>
<div class="level4">

<p>
This might be a good time to setup <a href="http://wiki.metalforge.net/doku.php/server:hosting#crossloop" class="wikilink1" title="server:hosting">crossloop</a> .
</p>

</div>

<h3 class="sectionedit11" id="update">UPDATE</h3>
<div class="level3">

<p>
To update an existing install to the latest svn image;
</p>

<p>
This confirms that you are still in your home directory
</p>
<pre class="code"> $ pwd
 /home/&lt;username&gt;</pre>

<p>
Now change directory (hence the cd) to the directory that contains the server files
</p>
<pre class="code"> $ cd server.svn</pre>

<p>
This confirms that you are in the server directory
</p>
<pre class="code"> $ pwd
 /home/&lt;username&gt;/server.svn</pre>

<p>
This updates the directory using svn
</p>
<pre class="code">$ svn update</pre>

<p>
repeat for
</p>

<p>
maps.svn
arch.svn
</p>

<p>
and repeat section “COMPILE”
</p>

</div>

<h2 class="sectionedit12" id="microsoft_windows_compile_guide">Microsoft Windows Compile Guide</h2>
<div class="level2">

<p>
Warning this information may be out of date
</p>

</div>

<h3 class="sectionedit13" id="subversion">Subversion</h3>
<div class="level3">

<p>
To access the latest version of crossfire from sourceforge, a Windows compatible tool to access the source files is called tortoisesvn which is available <a href="http://tortoisesvn.net/downloads.html" class="urlextern" title="http://tortoisesvn.net/downloads.html" rel="nofollow">here</a>.
</p>

<p>
The interface is built into the windows environment, to access the repository create a new folder such as “crossfire files” and right click on this folder. You will see the following option menu now available:
</p>

<p>
<a href="http://wiki.metalforge.net/lib/exe/detail.php/images:navigating_to_tortoisesvn.png?id=server%3Aserver_compiling" class="media" title="images:navigating_to_tortoisesvn.png"><img src="./server_server_compiling [Crossfire Wiki]_files/navigating_to_tortoisesvn.png" class="media" alt=""></a>
</p>

<p>
Select “Repo-browser”. When asked, use this <abbr title="Uniform Resource Locator">URL</abbr>: <a href="https://svn.code.sf.net/p/crossfire/code" class="urlextern" title="https://svn.code.sf.net/p/crossfire/code" rel="nofollow">https://svn.code.sf.net/p/crossfire/code</a>
</p>

<p>
<a href="http://wiki.metalforge.net/lib/exe/detail.php/images:svn_url_request.png?id=server%3Aserver_compiling" class="media" title="images:svn_url_request.png"><img src="./server_server_compiling [Crossfire Wiki]_files/svn_url_request.png" class="media" alt=""></a>
</p>

<p>
After a short time you should now see a window with the current directory structure of crossfire.
</p>

<p>
<a href="http://wiki.metalforge.net/lib/exe/detail.php/images:browsing_the_repository.png?id=server%3Aserver_compiling" class="media" title="images:browsing_the_repository.png"><img src="./server_server_compiling [Crossfire Wiki]_files/browsing_the_repository.png" class="media" alt=""></a>
</p>

<p>
You can now start checking out directories you are interested in. Note: that the branches (trunk, stable etc) are within these directories so do not check-out from the root directory unless you want to download _everything_.
To checkout a directory simply right click and select checkout:
</p>

<p>
<a href="http://wiki.metalforge.net/lib/exe/detail.php/images:checking_out1.png?id=server%3Aserver_compiling" class="media" title="images:checking_out1.png"><img src="./server_server_compiling [Crossfire Wiki]_files/checking_out1.png" class="media" alt=""></a>
</p>

<p>
and then choose where to save the downloaded files:
</p>

<p>
<a href="http://wiki.metalforge.net/lib/exe/detail.php/images:checking_out2.png?id=server%3Aserver_compiling" class="media" title="images:checking_out2.png"><img src="./server_server_compiling [Crossfire Wiki]_files/checking_out2.png" class="media" alt=""></a>
</p>

</div>

<h3 class="sectionedit14" id="requirements1">Requirements</h3>
<div class="level3">

<p>
The following tools are used to compile the server:
</p>
<ul>
<li class="level1"><div class="li"> Microsoft Visual Studio 6 (service pack 4 probably). Server has not been tested with other versions.</div>
</li>
<li class="level1"><div class="li"> flex, from <a href="http://gnuwin32.sourceforge.net/packages/flex.htm" class="urlextern" title="http://gnuwin32.sourceforge.net/packages/flex.htm" rel="nofollow">http://gnuwin32.sourceforge.net/packages/flex.htm</a>.</div>
<ul>
<li class="level2"><div class="li"> you need it to build <code>common/loader.c</code> and <code>random_maps/reader.c</code> from their respective .l. Syntax is: <code>flex -oloader.c -i loader.l</code>, <code>flex -oreader.c -i -P rm reader.l</code> respectively. The <code>-P rm</code> seems to be required to not have duplicate symbol issues</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> <a href="http://www.python.org/" class="urlextern" title="http://www.python.org" rel="nofollow">Python</a> to build the Python plugin. Any version starting from 2.3 should do the trick, if not <a href="http://sourceforge.net/tracker/?func=add&amp;group_id=13833&amp;atid=113833" class="urlextern" title="http://sourceforge.net/tracker/?func=add&amp;group_id=13833&amp;atid=113833" rel="nofollow">report a bug please</a>. 1.50 has been tested with Python 2.6.5 from <a href="http://www.python.org/download/" class="urlextern" title="http://www.python.org/download/" rel="nofollow">Python.org</a>, <a href="http://www.python.org/ftp/python/2.6.5/python-2.6.5.msi" class="urlextern" title="http://www.python.org/ftp/python/2.6.5/python-2.6.5.msi" rel="nofollow">direct link (MSI installer)</a></div>
</li>
<li class="level1"><div class="li"> if you want metaserver2 support, you'll need:</div>
<ul>
<li class="level2"><div class="li"> libcurl, from <a href="http://curl.haxx.se/" class="urlextern" title="http://curl.haxx.se/" rel="nofollow">http://curl.haxx.se/</a>. You probably want <a href="http://curl.haxx.se/download/libcurl-7.18.0-win32-msvc.zip" class="urlextern" title="http://curl.haxx.se/download/libcurl-7.18.0-win32-msvc.zip" rel="nofollow">this file</a> (no SSL support, none needed a priori).</div>
</li>
<li class="level2"><div class="li"> pthread, obtained from <a href="http://www.sourceware.org/pthreads-win32/" class="urlextern" title="http://www.sourceware.org/pthreads-win32/" rel="nofollow">http://www.sourceware.org/pthreads-win32/</a>. Tested with pthreads-w32-2-8-0-release.exe</div>
</li>
<li class="level2"><div class="li"> zlib, file <code>zlib1-dll.zip</code> from <a href="http://sourceforge.net/projects/gnuwin32/" class="urlextern" title="http://sourceforge.net/projects/gnuwin32/" rel="nofollow">GNU Win32</a> (<a href="http://sourceforge.net/projects/gnuwin32/files/zlib/1.2.3/zlib-1.2.3-bin.zip/download" class="urlextern" title="http://sourceforge.net/projects/gnuwin32/files/zlib/1.2.3/zlib-1.2.3-bin.zip/download" rel="nofollow">direct link</a>)</div>
</li>
<li class="level2"><div class="li"> copy the following files to the directory you'll run Crossfire from: <code>pthreadVC2.dll</code>, <code>zlib1.dll</code>, <code>libcurl.dll</code></div>
</li>
<li class="level2"><div class="li"> link the executable to <code>libcurl.lib</code> and <code>pthreadVC2.lib</code> (project settings → link → general → object/library modules)</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> to build the installer, you need <a href="http://nsis.sourceforge.net/" class="urlextern" title="http://nsis.sourceforge.net" rel="nofollow">NSIS</a>, and <a href="http://www.perl.org/" class="urlextern" title="http://www.perl.org" rel="nofollow">PERL</a> (for maps installer).</div>
</li>
<li class="level1"><div class="li"> to build archetypes, you need PERL</div>
</li>
<li class="level1"><div class="li"> once you got the server sources, open a command prompt, go to <code>make_win32</code> directory, run the <code>installwin32.bat</code> file. It will create required directories</div>
</li>
</ul>

<p>
The following tools are used to compile the client:
</p>
<ul>
<li class="level1"><div class="li"> <a href="http://www.gtk.org/" class="urlextern" title="http://www.gtk.org" rel="nofollow">GTK</a>. An installer with all required dependencies can be found at the <a href="http://gladewin32.sourceforge.net/modules/news/" class="urlextern" title="http://gladewin32.sourceforge.net/modules/news/" rel="nofollow">Glade/GTK+ project</a>. <strong>Warning</strong>: you'll need to add ~10 directories to include list, and rename some files around (like copy <code>libpng.lib</code> to <code>png.lib</code>). Don't ask why here, ask Glade/GTK+ project instead :)</div>
</li>
<li class="level1"><div class="li"> current SVN (end of 2006) is somewhat broken, and requires some tweaking to build (need to <code>undef HAVE_SDL</code>, comment out lines, add files, and such). That may be fixed or not eventually.</div>
</li>
<li class="level1"><div class="li"> if you want metaserver2 support, follow the same instructions as for the server.</div>
</li>
</ul>

</div>

<h3 class="sectionedit15" id="cross-compiling">Cross-Compiling</h3>
<div class="level3">

<p>
It may be possible to <a href="http://wiki.metalforge.net/doku.php/user:cavesomething:crosscompiling_for_windows" class="wikilink1" title="user:cavesomething:crosscompiling_for_windows">cross-compile Windows</a> binaries from Unix.
</p>

</div>

                    <!-- wikipage stop -->
                                    </div>

                <div class="docInfo"><bdi>server/server_compiling.txt</bdi> · Last modified: 2018/04/21 05:04 by <bdi>karl</bdi></div>

                            </div></div><!-- /content -->

            <hr class="a11y">

            <!-- PAGE ACTIONS -->
            <div id="dokuwiki__pagetools">
                <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li><a href="http://wiki.metalforge.net/doku.php/server:server_compiling?do=edit" class="action source" accesskey="v" rel="nofollow" title="Show pagesource [V]"><span>Show pagesource</span></a></li><li><a href="http://wiki.metalforge.net/doku.php/server:server_compiling?do=revisions" class="action revs" accesskey="o" rel="nofollow" title="Old revisions [O]"><span>Old revisions</span></a></li><li><a href="http://wiki.metalforge.net/doku.php/server:server_compiling?do=backlink" class="action backlink" rel="nofollow" title="Backlinks"><span>Backlinks</span></a></li><li><a href="http://wiki.metalforge.net/doku.php/server:server_compiling#dokuwiki__top" class="action top" accesskey="t" rel="nofollow" title="Back to top [T]"><span>Back to top</span></a></li>                    </ul>
                </div>
            </div>
        </div><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<div id="dokuwiki__footer"><div class="pad">
    
    <div class="buttons">
                <a href="http://www.dokuwiki.org/donate" title="Donate"><img src="./server_server_compiling [Crossfire Wiki]_files/button-donate.gif" width="80" height="15" alt="Donate"></a>
        <a href="http://www.php.net/" title="Powered by PHP"><img src="./server_server_compiling [Crossfire Wiki]_files/button-php.gif" width="80" height="15" alt="Powered by PHP"></a>
        <a href="http://validator.w3.org/check/referer" title="Valid HTML5"><img src="./server_server_compiling [Crossfire Wiki]_files/button-html5.png" width="80" height="15" alt="Valid HTML5"></a>
        <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS"><img src="./server_server_compiling [Crossfire Wiki]_files/button-css.png" width="80" height="15" alt="Valid CSS"></a>
        <a href="http://www.debian.org/" title="Run on Debian"><img src="./server_server_compiling [Crossfire Wiki]_files/button-debian.png" width="80" height="15" alt="Run on Debian"></a>
        <a href="http://dokuwiki.org/" title="Driven by DokuWiki"><img src="./server_server_compiling [Crossfire Wiki]_files/button-dw.png" width="80" height="15" alt="Driven by DokuWiki"></a>
    </div>
</div></div><!-- /footer -->

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-3475055-7', 'auto');
ga('send', 'pageview');

</script>

    </div></div><!-- /site -->

    <div class="no"><img src="./server_server_compiling [Crossfire Wiki]_files/indexer.php" width="2" height="1" alt=""></div>
    <div id="screen__mode" class="no"></div>    <!--[if ( lte IE 7 | IE 8 ) ]></div><![endif]-->


</body></html>